<KoenigCard
    @icon={{"koenig/card-indicator-email"}}
    @class={{concat (kg-style "container-card") " kg-accordion-card-container"}}
    @headerOffset={{@headerOffset}}
    @toolbar={{this.toolbar}}
    @payload={{@payload}}
    @isSelected={{@isSelected}}
    @isEditing={{@isEditing}}
    @selectCard={{@selectCard}}
    @deselectCard={{@deselectCard}}
    @editCard={{@editCard}}
    @hasEditMode={{true}}
    @saveCard={{@saveCard}}
    @saveAsSnippet={{@saveAsSnippet}}
    @onLeaveEdit={{this.leaveEditMode}}
    @addParagraphAfterCard={{@addParagraphAfterCard}}
    @moveCursorToPrevSection={{@moveCursorToPrevSection}}
    @moveCursorToNextSection={{@moveCursorToNextSection}}
    @editor={{@editor}}
    {{did-insert this.registerElement}}
    as |card|
>
    {{#if @isEditing}}

        {{!-- edit mode view --}}

        <div class="kg-accordion-card">
            <KoenigBasicHtmlInput
                @html={{@payload.heading}}
                @placeholder="Add your heading here..."
                @class="w-100 fw4 bn bg-transparent kg-accordion-card-heading"
                @name="toggle-heading"
                @defaultTag="h4"
                @onChange={{action "setHeadingText"}}
                @onFocus={{action (mut this.isFocused) true}}
                @onBlur={{action (mut this.isFocused) false}}
                {{!-- @onNewline={{action "handleEnter"}} --}}
                @didCreateEditor={{action "registerEditor"}}
            />
            <KoenigBasicHtmlTextarea
                @html={{@payload.content}}
                @placeholder="Add your content here..."
                @class="w-100 bn bg-transparent kg-accordion-card-content"
                @onChange={{action "setContentText"}}
                @onFocus={{action (mut this.isFocused) true}}
                @onBlur={{action (mut this.isFocused) false}}
                @didCreateEditor={{action "registerEditor"}}
            />
        </div>
    {{else}}

        {{!-- rendered (non-edit) mode view --}}

        <div class="kg-accordion-card">
            <div class="flex item-start">
                <div style="font-weight: bold;min-height: 24px" class="kg-accordion-card-heading">{{{this.formattedHeading}}}</div>
                <div>
                    <svg id="Regular" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><defs><style>.cls-1{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;fill-rule:evenodd;}</style></defs><title>arrow-down-1</title><path class="cls-1" d="M23.25,7.311,12.53,18.03a.749.749,0,0,1-1.06,0L.75,7.311"/></svg>
                </div>
            </div>
            <div style="padding-left: 2px;min-height: 24px" class="kg-accordion-card-content">{{{this.formattedContent}}}</div>
                
        </div>

    {{/if}}
</KoenigCard>
